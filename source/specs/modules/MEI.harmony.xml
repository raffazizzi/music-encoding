<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_odds.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_odds.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<div xmlns="http://www.tei-c.org/ns/1.0"
     xmlns:tei="http://www.tei-c.org/ns/1.0"
     xmlns:xi="http://www.w3.org/2001/XInclude">
   <specGrp xml:id="module.MEI.harmony">
      <moduleSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                  xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                  xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                  ident="MEI.harmony">
         <desc>Harmony component declarations.</desc>
      </moduleSpec>
      <classSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                 xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                 xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                 ident="att.harm.log"
                 module="MEI.harmony"
                 type="atts">
         <desc>Logical domain attributes.</desc>
         <classes>
            <memberOf key="att.controlEvent"/>
            <memberOf key="att.duration.additive"/>
            <memberOf key="att.startEndId"/>
            <memberOf key="att.timestamp2.logical"/>
         </classes>
         <attList>
            <attDef ident="chordref" usage="opt">
               <desc>Contains a reference to a <gi scheme="MEI">chordDef</gi> element elsewhere in the
            document.</desc>
               <datatype>
                  <rng:ref name="data.URI"/>
               </datatype>
               <constraintSpec ident="check_chordrefTarget" scheme="isoschematron">
                  <constraint>
                     <sch:rule context="@chordref">
                        <sch:assert role="warning" test="not(normalize-space(.) eq '')">@chordref attribute
                  should have content.</sch:assert>
                        <sch:assert role="warning"
                                    test="every $i in tokenize(., '\s+') satisfies substring($i,2)=//mei:chordDef/@xml:id">The value in @chordref should correspond to the @xml:id attribute of a chordDef
                  element.</sch:assert>
                     </sch:rule>
                  </constraint>
               </constraintSpec>
            </attDef>
         </attList>
      </classSpec>
      <classSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                 xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                 xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                 ident="model.chordTableLike"
                 module="MEI.harmony"
                 type="model">
         <desc>Groups elements that group playable chord definitions.</desc>
      </classSpec>
      <classSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                 xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                 xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                 ident="model.controlEventLike.harmony"
                 module="MEI.harmony"
                 type="model">
         <desc>Groups elements that function as control events; that is, those events that modify or
        otherwise depend on the existence of notated events.</desc>
         <classes>
            <memberOf key="model.controlEventLike"/>
         </classes>
      </classSpec>
      <classSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                 xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                 xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                 ident="model.figbassLike"
                 module="MEI.harmony"
                 type="model">
         <desc>Groups elements that record figured bass.</desc>
      </classSpec>
      <classSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                 xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                 xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                 ident="model.fLike"
                 module="MEI.harmony"
                 type="model">
         <desc>Groups elements that represent single figured bass elements.</desc>
      </classSpec>
      <classSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                 xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                 xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                 ident="model.harmLike"
                 module="MEI.harmony"
                 type="model">
         <desc>Groups elements that record harmony.</desc>
         <classes>
            <memberOf key="model.controlEventLike.harmony"/>
         </classes>
      </classSpec>
      <elementSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                   xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                   xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                   ident="barre"
                   module="MEI.harmony">
         <desc>A barre in a chord tablature grid.</desc>
         <classes>
            <memberOf key="att.common"/>
            <memberOf key="att.startEndId"/>
         </classes>
         <content>
            <rng:empty/>
         </content>
         <attList>
            <attDef ident="fret" usage="opt">
               <desc>Records the location at which the strings should be stopped against a fret in a
            fretboard diagram. This may or may not be the same as the actual location on the
            fretboard of the instrument in performance.</desc>
               <datatype>
                  <rng:data type="positiveInteger">
                     <rng:param name="minInclusive">1</rng:param>
                     <rng:param name="maxInclusive">5</rng:param>
                  </rng:data>
               </datatype>
            </attDef>
         </attList>
         <remarks>
            <p>The <att>startid</att> and <att>endid</att> attributes are used to indicate the <gi scheme="MEI">chordMember</gi> elements on which the barre starts and finishes
          respectively. The fret at which the barre should be created is recorded by the
            <att>fret</att> attribute.</p>
         </remarks>
      </elementSpec>
      <elementSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                   xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                   xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                   ident="chordDef"
                   module="MEI.harmony">
         <desc>(chord definition) â€“ Chord tablature definition.</desc>
         <classes>
            <memberOf key="att.common"/>
         </classes>
         <content>
            <rng:zeroOrMore>
               <rng:ref name="chordMember"/>
            </rng:zeroOrMore>
            <rng:zeroOrMore>
               <rng:ref name="barre"/>
            </rng:zeroOrMore>
         </content>
         <attList>
            <attDef ident="pos" usage="opt">
               <desc>Records the fret position at which the chord tablature is to be played.</desc>
               <datatype>
                  <rng:data type="positiveInteger"/>
               </datatype>
            </attDef>
         </attList>
         <remarks>
            <p>An <att>xml:id</att> attribute, while not required by the schema, is needed so that <gi scheme="MEI">harm</gi> elements can reference a particular chord definition. The
            <att>pos</att> (position) attribute is provided in order to create displayable chord
          tablature grids. <gi scheme="MEI">chordMember</gi> sub-elements record the individual
          pitches of the chord. <gi scheme="MEI">barre</gi> sub-elements may be used when a single
          finger is used to stop multiple strings.</p>
         </remarks>
      </elementSpec>
      <elementSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                   xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                   xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                   ident="chordMember"
                   module="MEI.harmony">
         <desc>An individual pitch in a chord defined by a <gi scheme="MEI">chordDef</gi>
        element.</desc>
         <classes>
            <memberOf key="att.accidental.gestural"/>
            <memberOf key="att.common"/>
            <memberOf key="att.intervalHarmonic"/>
            <memberOf key="att.pitched"/>
         </classes>
         <content>
            <rng:empty/>
         </content>
         <attList>
            <attDef ident="string" usage="opt">
               <desc>Holds the number of the string to be played.</desc>
               <datatype>
                  <rng:data type="nonNegativeInteger"/>
               </datatype>
            </attDef>
            <attDef ident="fret" usage="opt">
               <desc>Records the location at which a string should be stopped against a fret.</desc>
               <datatype>
                  <rng:ref name="data.FRETNUMBER.limited"/>
               </datatype>
            </attDef>
            <attDef ident="fing" usage="opt">
               <desc>Indicates which finger, if any, should be used to play an individual string. The
            index, middle, ring, and little fingers are represented by the values 1-4, while 't' is
            for the thumb. The values 'x' and 'o' indicate muffled and open strings,
            respectively.</desc>
               <datatype>
                  <rng:ref name="data.FINGER.FRET"/>
               </datatype>
            </attDef>
         </attList>
         <remarks>
            <p>The <att>string</att>, <att>fret</att>, and <att>fing</att> attributes are provided in
          order to create displayable chord tablature grids. The <att>inth</att> (harmonic interval)
          attribute may be used to facilitate automated performance of a chord. It gives the number
          of 1/2 steps above the bass. Of course, for the bass note itself, <att>inth</att> should
          be set to '0'.</p>
         </remarks>
      </elementSpec>
      <elementSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                   xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                   xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                   ident="chordTable"
                   module="MEI.harmony">
         <desc>Chord/tablature look-up table.</desc>
         <classes>
            <memberOf key="att.common"/>
            <memberOf key="model.chordTableLike"/>
         </classes>
         <content>
            <rng:oneOrMore>
               <rng:ref name="chordDef"/>
            </rng:oneOrMore>
         </content>
         <remarks>
            <p>A chordTable may be shared between MEI instances through the use of an external parsed
          entity containing the look-up table to be shared.</p>
         </remarks>
      </elementSpec>
      <elementSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                   xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                   xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                   ident="f"
                   module="MEI.harmony">
         <desc>(figure) â€“ Single element of a figured bass indication.</desc>
         <classes>
            <memberOf key="att.common"/>
            <memberOf key="att.facsimile"/>
            <memberOf key="att.f.anl"/>
            <memberOf key="att.f.ges"/>
            <memberOf key="att.f.log"/>
            <memberOf key="att.f.vis"/>
            <memberOf key="model.fLike"/>
         </classes>
         <content>
            <rng:zeroOrMore>
               <rng:choice>
                  <rng:text/>
                  <rng:ref name="model.textPhraseLike.limited"/>
                  <rng:ref name="model.editLike"/>
                  <rng:ref name="model.transcriptionLike"/>
               </rng:choice>
            </rng:zeroOrMore>
         </content>
      </elementSpec>
      <elementSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                   xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                   xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                   ident="fb"
                   module="MEI.harmony">
         <desc>(figured bass) â€“ Symbols added to a bass line that indicate harmony. Used to improvise a
        chordal accompaniment. Sometimes called Generalbass, thoroughbass, or basso continuo.</desc>
         <classes>
            <memberOf key="att.common"/>
            <memberOf key="att.common.anl"/>
            <memberOf key="att.facsimile"/>
            <memberOf key="model.figbassLike"/>
         </classes>
         <content>
            <rng:zeroOrMore>
               <rng:choice>
                  <rng:ref name="model.fLike"/>
                  <rng:ref name="model.editLike"/>
                  <rng:ref name="model.transcriptionLike"/>
               </rng:choice>
            </rng:zeroOrMore>
         </content>
      </elementSpec>
      <elementSpec xmlns:rng="http://relaxng.org/ns/structure/1.0"
                   xmlns:sch="http://purl.oclc.org/dsdl/schematron"
                   xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
                   ident="harm"
                   module="MEI.harmony">
         <desc>(harmony) â€“ An indication of harmony, e.g., chord names, tablature grids, harmonic
        analysis, figured bass.</desc>
         <classes>
            <memberOf key="att.common"/>
            <memberOf key="att.facsimile"/>
            <memberOf key="att.harm.log"/>
            <memberOf key="att.harm.vis"/>
            <memberOf key="att.harm.ges"/>
            <memberOf key="att.harm.anl"/>
            <memberOf key="model.harmLike"/>
         </classes>
         <content>
            <rng:zeroOrMore>
               <rng:choice>
                  <rng:text/>
                  <rng:ref name="model.textPhraseLike.limited"/>
                  <rng:ref name="model.graphicPrimitiveLike"/>
                  <rng:ref name="model.editLike"/>
                  <rng:ref name="model.transcriptionLike"/>
                  <rng:ref name="model.figbassLike"/>
               </rng:choice>
            </rng:zeroOrMore>
         </content>
         <constraintSpec ident="harm_start-type_attributes_required" scheme="isoschematron">
            <constraint>
               <sch:rule context="mei:harm">
                  <sch:assert test="@startid or @tstamp or @tstamp.ges or @tstamp.real">Must have one of
              the attributes: startid, tstamp, tstamp.ges or tstamp.real.</sch:assert>
               </sch:rule>
            </constraint>
         </constraintSpec>
      </elementSpec>
   </specGrp>
</div>
